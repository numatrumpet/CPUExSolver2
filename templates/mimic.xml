<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<architecture name="mimic">
	<registers>
		<!-- %は特殊文字として扱われるためとして%%とエスケープする -->
		<intRegs num="32" prefix="$r"/>
		<floatRegs num="32" prefix="$f"/>
		<constFloatRegs num="16"/>
		<zeroReg index="0"/>
		<frameReg index="1"/>
		<heapReg index="2"/>
		<oneReg index="30"/>
		<minusOneReg index="31"/>
		<!-- indexを""にすると汎用レジスタとは別に用意されたレジスタが使われる -->
		<linkReg index=""/>
	</registers>

	<RAM size="8.00" />
	<comment text="#" />

	<binary endian="LITTLE" const-table-type="no_use" tag="0xffFFffFF" addressing="word" rom-addressing="word" direction="toBig"/>
	<instructions forward="true">
		<!-- 000 -->
		<ADD name="add" op="0b000000"/>
		<SUB name="sub" op="0b000001"/>
		<MUL name="mul" op="0b000010"/>
		<AND name="and" op="0b000011"/>
		<OR name="or"   op="0b000100"/>
		<NOR name="nor" op="0b000101"/>
		<XOR name="xor" op="0b000110"/>
		
		<!-- 001 -->
		<ADDI name="addi" op="0b001000"/>
		<SUBI name="subi" op="0b001001"/>
		<MULI name="muli" op="0b001010"/>
		<ANDI name="andi" op="0b001011"/>
		<ORI  name="ori"  op="0b001100"/>
		<NORI name="nori" op="0b001101"/>
		<XORI name="xori" op="0b001110"/>

		<SLLI name="slli" op="0b000111"/>
		<SRAI name="srai" op="0b001111"/>

		<!-- 010 -->
		<SETLO name="mvlo" op="0b010000"/>
		<SETHI name="mvhi" op="0b010001"/>
		<FSETLO name="fmvlo" op="0b010010"/>
		<FSETHI name="fmvhi" op="0b010011"/>

		<!-- 010 -->
		<ITOF  name="itof"  op="0b010100"/>
		<FTOI  name="ftoi"  op="0b010101"/>
		<IMOVF name="imovf" op="0b010110"/>
		<FMOVI name="fmovi" op="0b010111"/>

		<!-- 011 -->
		<FMOV  name="fmov"  op="0b110000"/>
		<FNEG  name="fneg"  op="0b110001"/>
		<FADD  name="fadd"  op="0b110010"/>
		<FSUB  name="fsub"  op="0b110011"/>
		<FMUL  name="fmul"  op="0b110100"/>
		<FMULN name="fmuln" op="0b110101"/>
		<FDIV  name="fdiv"  op="0b110110"/>
		<FSQRT name="fsqrt" op="0b110111"/>

		<!-- 101 -->
		<LDI name="ldi" op="0b101000"/>
		<STI name="sti" op="0b101001"/>
		<LD name="ldr" op="0b101100"/>
		<ST name="str" op="0b101101"/>
		<FLDI name="fldi" op="0b101010"/>
		<FSTI name="fsti" op="0b101011"/>
		<FLD name="fldr" op="0b101110"/>
		<FST name="fstr" op="0b101111"/>

		<!-- 100 -->
		<BEQ  name="beq"  op="0b100000" addressMode="relative"/>
		<BLT  name="blt"  op="0b100001" addressMode="relative"/>
		<BLE  name="ble"  op="0b100010" addressMode="relative"/>
		<FBEQ name="fbeq" op="0b100100" addressMode="relative"/>
		<FBLT name="fblt" op="0b100101" addressMode="relative"/>
		<FBLE name="fble" op="0b100110" addressMode="relative"/>

		<!-- 111 -->
		<BRANCH  name="j"      op="0b111000"/>
		<JMPREG  name="jr"     op="0b111001"/>
		<CALL    name="call"   op="0b111010"/>
		<CALLREG name="callr"  op="0b111011"/>
		<RETURN  name="return" op="0b111100"/>

		<INPUTBYTE name="inputb" op="0b111101"/>
		<OUTPUTBYTE name="outputb" op="0b111110"/>

		<HALT name="halt" op="0b111111"/>

		<NOT use="false" name="not" op="0b000111"/> <!-- mnemonic: -> NOR -->
		<MOV use="false" name="mov" op="Move"/>
		<DIV use="false" name="div" op="ALU"/>
		<SLL use="false" name="sll" op="ALU"/>
		<SRL use="false" name="srl" op="ALU"/>
		<SLA use="false" name="sla" op="ALU"/>
		<SRA use="false" name="sra" op="ALU"/>
		<SHIFT use="false" name="shift" op="ALU"/>
		<DIVI use="false" name="divi" op="0b111"/>
		<SRLI use="false" name="srli" op="0b1001"/>
		<SLAI use="false" name="slai" op="0b1010"/>
		<SHIFTI use="false" name="shifti" op="0b1100"/>
		<FINV use="false" name="finv" op="FPU"/>
		<FINVN use="false" name="finvn" op="FPU"/>
		<FABS use="false" name="fabs" op="FPU"/>
		<FLOOR use="false" name="floor" op="FPU"/>
		<FSIN use="false" name="fsin" op="FPU"/>
		<FCOS use="false" name="fcos" op="FPU"/>
		<FTAN use="false" name="ftan" op="FPU"/>
		<FATAN use="false" name="fatan" op="FPU"/>
		<JMP_LNK use="false" name="jal" op="0b100011"/>
		<JMPREG_LNK use="false" name="jalr" op="0b100100"/>
		<INPUTWORD use="false" name="inputw" op="System"/>
		<INPUTFLOAT use="false" name="inputf" op="System"/>
		<OUTPUTWORD use="false" name="outputw" op="System"/>
		<OUTPUTFLOAT use="false" name="outputf" op="System"/>
		<FBGE use="false" name="fbge" op="0b100001" addressMode="relative"/>
		<FBGT use="false" name="fbgt" op="0b11111" addressMode="relative"/>
		<FBNE use="false" name="fbne" op="0b11101" addressMode="relative"/>
		<BGE  use="false" name="bge"  op="0b11011" addressMode="relative"/>
		<BGT  use="false" name="bgt"  op="0b11001" addressMode="relative"/>
		<BNE  use="false" name="bne"  op="0b10111" addressMode="relative"/>

		<mnemonics>
			<NOP name="nop" formAsm="">
				<inst command="&quot;add\t$r0, $r0, $r0&quot;"/>
			</NOP>
			<MOV name="mov" formAsm="IRT, IRS">
				<inst command="&quot;add\t$r%d, $r%d, $r0&quot;, rt, rs"/>
			</MOV>
			<NOT name="not" formAsm="IRT, IRS">
				<inst command="&quot;nor\t$r%d, $r%d, $r0&quot;, rt, rs, rs" />
			</NOT>
			<NEG name="neg" formAsm="IRT, IRS">
				<inst command="&quot;sub\t$r%d, $r0, $r%d&quot;, rt, rs"/>
			</NEG>
			<SETL name="setl" formAsm="IRS, LABEL">
				<inst useLabel="true" command="&quot;addi\t$r%d, $r0, 0&quot;, rs"/>
			</SETL>
			<FSET name="fliw" formAsm="FRS, FLOAT">
				<inst command="&quot;fmvlo\t$f%d, %d&quot;, rs, gethi(d)"/>
				<inst command="&quot;fmvhi\t$f%d, %d&quot;, rs, getlo(d)"/>
			</FSET>
			<BGT name="fliw" formAsm="FRS, FLOAT">
				<inst command="&quot;fmvlo\t$f%d, %d&quot;, rs, gethi(d)"/>
				<inst command="&quot;fmvhi\t$f%d, %d&quot;, rs, getlo(d)"/>
			</BGT>
		</mnemonics>
	</instructions>
</architecture>
